@tailwind base;
@tailwind components;
@tailwind utilities;

/* Ensure full height for layout */
html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    /* Music Theory Theme (Cyberpunk/Dark Mode Default) */
    --music-kick: 190 90% 50%; /* Cyan */
    --music-snare: 300 90% 50%; /* Fuchsia */
    --music-tonic: 220 80% 20%; /* Deep Blue */
    --music-subdominant: 160 60% 20%; /* Deep Green */
    --music-dominant: 0 70% 20%; /* Deep Red */
    --music-diminished: 270 50% 20%; /* Deep Purple */
  }

  /* Preset themes: `pop` (neon) and `jazz` (muted). Add class to body e.g. <body class="pop"> */
  .pop-mode {
    --music-kick: 190 95% 55%;
    --music-snare: 310 95% 55%;
    --music-tonic: 220 95% 30%;
    --music-subdominant: 160 85% 28%;
    --music-dominant: 6 95% 32%;
    --music-diminished: 270 90% 35%;
  }

  .jazz-mode {
    --music-kick: 190 20% 35%;
    --music-snare: 300 30% 38%;
    --music-tonic: 220 20% 18%;
    --music-subdominant: 160 25% 18%;
    --music-dominant: 10 20% 18%;
    --music-diminished: 260 20% 20%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    /* Music tones (Dark Mode defaults) */
    --music-kick: 190 90% 50%;
    --music-snare: 300 90% 50%;
    --music-tonic: 220 80% 20%;
    --music-subdominant: 160 60% 20%;
    --music-dominant: 0 70% 20%;
    --music-diminished: 270 50% 20%;
  }
  
  /* Grid Layout Variables - Critical for BeatCard rendering */
  :root {
    --beat-width: 6rem;
    --beat-height: 8rem;
    --measure-gap: 0.5rem;
    --section-gap: 3rem;
  }
}

@layer base {
  :root {
    --font-sans: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    --font-serif: Georgia, 'Times New Roman', Times, serif;
    --font-display: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
  
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    font-feature-settings:
      'rlig' 1,
      'calt' 1;
  }
  code, pre, .font-mono {
    font-family: var(--font-mono);
  }
  .font-serif {
    font-family: var(--font-serif);
  }
  .font-display, h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
  }
  select {
    @apply bg-popover text-popover-foreground;
  }
  select option {
    @apply bg-popover text-popover-foreground;
  }
}

/* Subtle pulse for high-energy hits */
@keyframes pulse-subtle {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  50% {
    transform: translateY(-2px) scale(1.01);
    opacity: 0.95;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}
.animate-pulse-subtle {
  animation: pulse-subtle 1s ease-in-out infinite;
}

/* Workstation layout variables and helpers */
:root {
  --left-width: 20%;
  --center-width: 60%;
  --right-width: 20%;
}

.ws-left { inline-size: var(--left-width); }
.ws-center { inline-size: var(--center-width); }
.ws-right { inline-size: var(--right-width); }
.ws-resizer { background-color: hsl(var(--border)); inline-size: 4px; cursor: col-resize; block-size: 100%; border: none; background-clip: padding-box; }
.ws-resizer:focus { outline: 2px solid rgba(59,130,246,0.6); outline-offset: -2px; }

@media (max-width: 900px) {
  :root { --left-width: 0%; --right-width: 0%; --center-width: 100%; }
}
